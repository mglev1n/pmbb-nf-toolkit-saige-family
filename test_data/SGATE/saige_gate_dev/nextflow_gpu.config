// includeConfig 'configs/saige_exwas.config'
// includeConfig 'configs/saige_gene_phewas.config'
includeConfig 'configs/saige_variant_phewas.config'

profiles {

    non_docker_dev {
        process.executor = awsbatch-or-lsf-or-slurm-etc
    }

    standard {
        process.executor = awsbatch-or-lsf-or-slurm-etc
        process.container = 'pmbb_code/saige_exwas'
        docker.enabled = true
    }

    cluster {
        process {
            executor="lsf"
            queue = 'epistasis_normal'
            memory='15G'
                withLabel: gpu_on {
                    container = null
                    queue = 'gpu'
                    clusterOptions = { "-R 'rusage[mem=40GB]' -gpu 'num=8:mode=exclusive_process' -n 8" }
                    cpus='8'
        
                } 
                withLabel: gpu_off {
                    cpus = '1'
                }
            singularity.enabled = true
            singularity.runOptions = '-B /root/,/directory/,/names/'
            process.container = 'saige_family.sif'
        }
    }

    all_of_us {
        process.executor = awsbatch-or-lsf-or-slurm-etc
        process.memory = '15GB'
        process.container = 'gcr.io/aou-containers-kk4fa/saige_exwas'
        docker.enabled = true
    }
}